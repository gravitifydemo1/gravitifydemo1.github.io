!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var r=n(3),o=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ChartIO Graph",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=new Array(o),u=new Array(o),s=0;s<o;s++){u[s]=new Array(e);for(var c=0;c<e;c++)u[s][c]={x:c,y:0};u[s].cur=e+1,a[s]={type:"line",dataPoints:u[s]}}this.dataPointsBuffer=u,this.dpLen=e,this.chart=new r.Chart(n,{title:{text:i},axisY:{includeZero:!0},data:a})}var e,n,o;return e=t,(n=[{key:"addData",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.dataPointsBuffer[e],i=this.dpLen,r=n[0],o=1;o<i;o++)n[o-1]=n[o];r.x=n.cur++,r.y=t,n[i-1]=r,this.chart.render()}}])&&i(e.prototype,n),o&&i(e,o),t}();function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(t,n,i,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=s(this,l(e).call(this,t,n,i,2))).lastAverage=0,o.movingAverageFunction=r,o}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o),n=e,(i=[{key:"addData",value:function(t){c(l(e.prototype),"addData",this).call(this,t,0);var n=this.movingAverageFunction(this.dataPointsBuffer[0].cur-this.dpLen-1,this.lastAverage,t,this.dataPointsBuffer[0]);c(l(e.prototype),"addData",this).call(this,n,1),this.lastAverage=n}}])&&u(n.prototype,i),r&&u(n,r),e}(),h=n(1);n.d(e,"TIME_UNIT",function(){return y}),n.d(e,"globalGameConfig",function(){return p}),n.d(e,"pixiApp",function(){return v}),n.d(e,"stateCharts",function(){return g}),n.d(e,"init",function(){return b});var y=.01,p={height:512,width:512,g:10},v=new h.Application({alpha:255,antialias:!0,height:p.height,width:p.width}),g=[new o(64,"gravitify-momentum-graph","Net momentum"),new d(64,"gravitify-kinetic-energy-graph","Net K.E.",function(t){if(t<0||t>1||"number"!=typeof t)throw"exp must be b/w 0 & 1";return function(e,n,i,r){void 0===r.tweight&&(r.tweight=0);var o=r.tweight;return r.tweight=r.tweight*t+1,(n*o*t+i)/r.tweight}}(.5))];function b(){v.renderer.backgroundColor=16777215,document.getElementById("gravitify-canvas-container").appendChild(v.view)}},function(t,e){t.exports=PIXI},function(t,e,n){var i=n(4),r=n(0),o=n(1),a=r.pixiApp;a.renderer,a.stage,o.Sprite;t.exports={drawInit:function(){i.init()},AirNode:i}},function(t,e){t.exports=CanvasJS},function(t,e,n){"use strict";n.r(e),n.d(e,"defaultTexture",function(){return i}),n.d(e,"init",function(){return s});var i,r=n(1),o=n(0),a=8388564,u=o.pixiApp.renderer;function s(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:18,e=2*t,n=r.RenderTexture.create(e,e),o=new r.Graphics;o.beginFill(a),o.drawCircle(t,t,t-5),o.endFill(),o.lineStyle(2,a),o.drawCircle(t,t,t),o.position.x=0,o.position.y=0,u.render(o,n),i=n}()}},function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(2),o=n.n(r);function a(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function u(t,e,n,i){return 2===arguments.length?u(t.x,t.y,e.x,e.y):Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}function s(t,e){return{x:t.x+e.x,y:t.y+e.y}}function c(t,e){return{x:t.x*e,y:t.y*e}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}var h=n(0),y=(h.globalGameConfig,h.TIME_UNIT,function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;l(this,t),this.target=e,this.boost=n}return d(t,[{key:"getCasualAcc",value:function(){var t=2*(Math.random()-.5)*Math.PI,e=this.target;return 0==e.velocity.x&&0==e.velocity.y?{x:Math.floor(Math.cos(t)*this.boost),y:Math.floor(Math.sin(t)*this.boost)}:{x:0,y:0}}}]),t}());function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var v=n(0),g=(n(1),2),b=Math.PI,m=(v.globalGameConfig.width,v.globalGameConfig.height,function(){function t(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position={x:e,y:n},this.velocity={x:0,y:0},this.metrics={density:o,mass:b*i*i*o,radius:i},this.drawingObject=r}var e,n,i;return e=t,(n=[{key:"getX",value:function(){return this.position.x}},{key:"getY",value:function(){return this.position.y}},{key:"setX",value:function(t){this.position.x=t}},{key:"setY",value:function(t){this.position.y=t}},{key:"renderUpdate",value:function(){this.drawingObject.position.x=this.position.x,this.drawingObject.position.y=this.position.y}},{key:"isOverlapped",value:function(t){var e=this.metrics.radius,n=t.metrics.radius;return e+n>u(this.getX()+e,this.getY()+e,t.getX()+n,t.getY()+n)}}])&&p(e.prototype,n),i&&p(e,i),t}()),w=n(1);function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var O=n(2),k=Math.floor,M=Math.abs,j=i.globalGameConfig,P=i.pixiApp,T=i.stateCharts,A=j.width,_=j.height;function S(t){return k(M(t))<=.01?0:t}function I(t){var e,n,i,r=t.getX(),o=t.getY(),a=2*t.metrics.radius;if(r<0)e=0;else if(o<0)e=1;else if(r>A-a)e=2;else{if(!(o>_-a))throw"applyBoundaryImpluse() called on an node that has not collided with the nodiversal boundary @("+r+", "+o+")";e=3}if(e%2==0){var u=0==e?0:A-a;i=t.velocity.y/t.velocity.x*((n=u)-r)+o,t.velocity.x*=-1}else{var s=1==e?0:_-a;n=t.velocity.x/t.velocity.y*((i=s)-o)+r,t.velocity.y*=-1}t.position.x=function(t,e){return t<0?0:t<=A-e?t:A-e}(n,a),t.position.y=function(t,e){return t<0?0:t<=_-e?t:_-e}(i,a)}function G(t,e,n){null==e&&(e=t.velocity.x),null==n&&(n=t.velocity.y);var i=S(t.getX()+e),r=S(t.getY()+n);t.position.x=i,t.position.y=r,function(t,e,n){if("object"==C(n))n=n.metrics.radius;else if(void 0===n)throw"Undefined nodeRadius for isOutOfBounds()";var i=2*n;return t<0||e<0||t>A-i||e>_-i}(i,r,t.metrics.radius)&&I(t)}var E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodeCount=e,this.nodes=new Array(e);for(var n=j.width/e,i=0;i<e;i++){var r=i*n+Math.random()*n,o=new w.Sprite(O.AirNode.defaultTexture);P.stage.addChild(o);var a=new m(r,r,18,o);this.nodes[i]=a,a.nodeTracker={forces:[new y(a)]},a.oldNodalGroup=[],a.id=i}this.render=this.render.bind(this),this.renderRecursive=this.renderRecursive.bind(this),this.updateTime=this.updateTime.bind(this),this.uiActive=!0}var e,n,r;return e=t,(n=[{key:"startLooper",value:function(){this.clock=0,this.updateClock=setInterval(this.updateTime,1e3*i.TIME_UNIT),this.renderRecursive()}},{key:"stopLooper",value:function(){var t=this.updateClock;null!=t&&clearInterval(t)}},{key:"updateTime",value:function(){++this.clock;var t=this.nodes;if(t.forEach(function(t){var e={x:0,y:0};t.nodeTracker.forces.forEach(function(t){var n=t.getCasualAcc();e.x+=n.x,e.y+=n.y}),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=1;i<e.length;i++)e[i].x+=e[i-1].x,e[i].y+=e[i-1].y}(e,t.velocity),Math.abs(t.velocity.x)<1&&(t.velocity.x=0),Math.abs(t.velocity.y)<1&&(t.velocity.y=0),G(t)}),this._applyCollisionImpulse(),this.clock%20==0){for(var e={x:0,y:0},n=0,i=0;i<this.nodes.length;i++){var r=t[i],o=a(r.velocity),u=r.metrics.mass;e=s(e,r.velocity),n+=.5*u*o*o}T[0].addData(a(e)),T[1].addData(n)}}},{key:"render",value:function(){this.nodes.forEach(function(t){t.renderUpdate()}),P.render()}},{key:"renderRecursive",value:function(){this.render(),this.uiActive&&requestAnimationFrame(this.renderRecursive)}},{key:"_detectCollidedNodes",value:function(){for(var t=this.nodeCount,e=this.nodes,n=0;n<t;n++)e[n].nodalGroup=[];for(var i=0;i<t;i++)for(var r=e[i],o=i+1;o<t;o++){var a=e[o];r.isOverlapped(a)&&(r.nodalGroup.push(a),a.nodalGroup.push(r))}}},{key:"_applyCollisionImpulse",value:function(){this._detectCollidedNodes();for(var t,e,n,i,r=this.nodes,o=this.nodeCount,a=0;a<o;a++)r[a].originalVelocity=r[a].velocity,r[a].nodalGroup.length>0&&(r[a].velocity={x:0,y:0},r[a].clusterDistance=[]);for(var l=0;l<o;l++){var f=this.nodes[l],d=f.nodalGroup;c(f.velocity,f.metrics.mass);if(d.length>0)for(var h=0;h<d.length;h++)if(f.clusterDistance[d[h].id]=u(f.position,d[h].position),!(f.oldNodalGroup.includes(d[h])&&f.clusterDistance[d[h].id]>f.oldClusterDistance[d[h].id])){var y=(t=f,e=d[h],n=void 0,i=void 0,n=t.metrics.mass,i=e.metrics.mass,{x:((n-i)*t.originalVelocity.x+2*i*e.originalVelocity.x)/(n+i),y:((n-i)*t.originalVelocity.y+2*i*e.originalVelocity.y)/(n+i)});f.velocity=s(f.velocity,c(y,1/d.length))}}for(var p=0;p<o;p++)this.nodes[p].oldNodalGroup=this.nodes[p].nodalGroup,this.nodes[p].oldClusterDistance=this.nodes[p].clusterDistance,this.nodes[p].velocity.x=Math.min(this.nodes[p].velocity.x,2*this.nodes[p].metrics.radius),this.nodes[p].velocity.y=Math.min(this.nodes[p].velocity.y,2*this.nodes[p].metrics.radius)}}])&&x(e.prototype,n),r&&x(e,r),t}();window.onload=function(){i.init(),o.a.drawInit(),(new E).startLooper()}}]);