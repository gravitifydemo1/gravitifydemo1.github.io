!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var r=n(3),o=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ChartIO Graph",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=new Array(o),s=new Array(o),u=0;u<o;u++){s[u]=new Array(e);for(var l=0;l<e;l++)s[u][l]={x:l,y:0};s[u].cur=e+1,a[u]={type:"line",dataPoints:s[u]}}this.dataPointsBuffer=s,this.dpLen=e,this.chart=new r.Chart(n,{title:{text:i},axisY:{includeZero:!1},data:a})}var e,n,o;return e=t,(n=[{key:"addData",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.dataPointsBuffer[e],i=this.dpLen,r=n[0],o=1;o<i;o++)n[o-1]=n[o];r.x=n.cur++,r.y=t,n[i-1]=r,this.chart.render()}}])&&i(e.prototype,n),o&&i(e,o),t}(),a=n(1);n.d(e,"TIME_UNIT",function(){return s}),n.d(e,"globalGameConfig",function(){return u}),n.d(e,"pixiApp",function(){return l}),n.d(e,"stateCharts",function(){return c}),n.d(e,"init",function(){return d});var s=.01,u={height:512,width:512,g:10},l=new a.Application({alpha:255,antialias:!0,height:u.height,width:u.width}),c=[new o(64,"gravitify-momentum-graph","Net momentum"),new o(64,"gravitify-kinetic-energy-graph","Net K.E.")];function d(){l.renderer.backgroundColor=16777215,document.getElementById("gravitify-canvas-container").appendChild(l.view)}},function(t,e){t.exports=PIXI},function(t,e,n){var i=n(4),r=n(0),o=n(1),a=r.pixiApp;a.renderer,a.stage,o.Sprite;t.exports={drawInit:function(){i.init()},AirNode:i}},function(t,e){t.exports=CanvasJS},function(t,e,n){"use strict";n.r(e),n.d(e,"defaultTexture",function(){return i}),n.d(e,"init",function(){return u});var i,r=n(1),o=n(0),a=8388564,s=o.pixiApp.renderer;function u(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:18,e=2*t,n=r.RenderTexture.create(e,e),o=new r.Graphics;o.beginFill(a),o.drawCircle(t,t,t-5),o.endFill(),o.lineStyle(2,a),o.drawCircle(t,t,t),o.position.x=0,o.position.y=0,s.render(o,n),i=n}()}},function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(2),o=n.n(r);function a(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function s(t,e,n,i){return 2===arguments.length?s(t.x,t.y,e.x,e.y):Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}function u(t,e){return{x:t.x+e.x,y:t.y+e.y}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var f=n(0),h=(f.globalGameConfig,f.TIME_UNIT,function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;l(this,t),this.target=e,this.boost=n}return d(t,[{key:"getCasualAcc",value:function(){var t=2*(Math.random()-.5)*Math.PI,e=this.target;return 0==e.velocity.x&&0==e.velocity.y?{x:Math.floor(Math.cos(t)*this.boost),y:Math.floor(Math.sin(t)*this.boost)}:{x:0,y:0}}}]),t}());function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var v=n(0),p=(n(1),2),g=Math.PI,m=(v.globalGameConfig.width,v.globalGameConfig.height,function(){function t(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position={x:e,y:n},this.velocity={x:0,y:0},this.metrics={density:o,mass:g*i*i*o,radius:i},this.drawingObject=r}var e,n,i;return e=t,(n=[{key:"getX",value:function(){return this.position.x}},{key:"getY",value:function(){return this.position.y}},{key:"setX",value:function(t){this.position.x=t}},{key:"setY",value:function(t){this.position.y=t}},{key:"renderUpdate",value:function(){this.drawingObject.position.x=this.position.x,this.drawingObject.position.y=this.position.y}},{key:"isOverlapped",value:function(t){var e=this.metrics.radius,n=t.metrics.radius;return e+n>s(this.getX()+e,this.getY()+e,t.getX()+n,t.getY()+n)}}])&&y(e.prototype,n),i&&y(e,i),t}()),b=n(1);function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var C=n(2),k=Math.floor,M=Math.abs,T=i.globalGameConfig,I=i.pixiApp,O=i.stateCharts,A=T.width,G=T.height;function j(t){return k(M(t))<=.01?0:t}function P(t){var e,n,i,r=t.getX(),o=t.getY(),a=2*t.metrics.radius;if(r<0)e=0;else if(o<0)e=1;else if(r>A-a)e=2;else{if(!(o>G-a))throw"applyBoundaryImpluse() called on an node that has not collided with the nodiversal boundary @("+r+", "+o+")";e=3}if(e%2==0){var s=0==e?0:A-a;i=t.velocity.y/t.velocity.x*((n=s)-r)+o,t.velocity.x*=-1}else{var u=1==e?0:G-a;n=t.velocity.x/t.velocity.y*((i=u)-o)+r,t.velocity.y*=-1}t.position.x=function(t,e){return t<0?0:t<=A-e?t:A-e}(n,a),t.position.y=function(t,e){return t<0?0:t<=G-e?t:G-e}(i,a)}function S(t,e,n){null==e&&(e=t.velocity.x),null==n&&(n=t.velocity.y);var i=j(t.getX()+e),r=j(t.getY()+n);t.position.x=i,t.position.y=r,function(t,e,n){if("object"==w(n))n=n.metrics.radius;else if(void 0===n)throw"Undefined nodeRadius for isOutOfBounds()";var i=2*n;return t<0||e<0||t>A-i||e>G-i}(i,r,t.metrics.radius)&&P(t)}var _=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodeCount=e,this.nodes=new Array(e);for(var n=T.width/e,i=0;i<e;i++){var r=i*n+Math.random()*n,o=new b.Sprite(C.AirNode.defaultTexture);I.stage.addChild(o);var a=new m(r,r,18,o);this.nodes[i]=a,a.nodeTracker={forces:[new h(a)]},a.oldNodalGroup=[],a.id=i}this.render=this.render.bind(this),this.renderRecursive=this.renderRecursive.bind(this),this.updateTime=this.updateTime.bind(this),this.uiActive=!0}var e,n,r;return e=t,(n=[{key:"startLooper",value:function(){this.clock=0,this.updateClock=setInterval(this.updateTime,1e3*i.TIME_UNIT),this.renderRecursive()}},{key:"stopLooper",value:function(){var t=this.updateClock;null!=t&&clearInterval(t)}},{key:"updateTime",value:function(){if(++this.clock,this.nodes.forEach(function(t){var e={x:0,y:0};t.nodeTracker.forces.forEach(function(t){var n=t.getCasualAcc();e.x+=n.x,e.y+=n.y}),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=1;i<e.length;i++)e[i].x+=e[i-1].x,e[i].y+=e[i-1].y}(e,t.velocity),Math.abs(t.velocity.x)<1&&(t.velocity.x=0),Math.abs(t.velocity.y)<1&&(t.velocity.y=0),S(t)}),this._applyCollisionImpulse(),this.clock%20==0){for(var t=0,e=0,n=0;n<this.nodes.length;n++){var i=this.nodes[n],r=a(i.velocity),o=i.metrics.mass;t+=r*o,e+=.5*o*r*r}O[0].addData(t),O[1].addData(e)}}},{key:"render",value:function(){this.nodes.forEach(function(t){t.renderUpdate()}),I.render()}},{key:"renderRecursive",value:function(){this.render(),this.uiActive&&requestAnimationFrame(this.renderRecursive)}},{key:"_detectCollidedNodes",value:function(){for(var t=this.nodeCount,e=this.nodes,n=0;n<t;n++)e[n].nodalGroup=[];for(var i=0;i<t;i++)for(var r=e[i],o=i+1;o<t;o++){var a=e[o];r.isOverlapped(a)&&(r.nodalGroup.push(a),a.nodalGroup.push(r))}}},{key:"_applyCollisionImpulse",value:function(){this._detectCollidedNodes();for(var t,e,n,i,r,o,a=this.nodes,l=this.nodeCount,c=0;c<l;c++)a[c].originalVelocity=a[c].velocity,a[c].nodalGroup.length>0&&(a[c].velocity={x:0,y:0},a[c].clusterDistance=[]);for(var d=0;d<l;d++){var f=this.nodes[d],h=f.nodalGroup;r=f.velocity,o=f.metrics.mass,r.x,r.y;if(h.length>0)for(var y=0;y<h.length;y++)if(f.clusterDistance[h[y].id]=s(f.position,h[y].position),!(f.oldNodalGroup.includes(h[y])&&f.clusterDistance[h[y].id]>f.oldClusterDistance[h[y].id])){var v=(t=f,e=h[y],n=void 0,i=void 0,n=t.metrics.mass,i=e.metrics.mass,{x:((n-i)*t.originalVelocity.x+2*i*e.originalVelocity.x)/(n+i),y:((n-i)*t.originalVelocity.y+2*i*e.originalVelocity.y)/(n+i)});f.velocity=u(f.velocity,v)}}for(var p=0;p<l;p++)this.nodes[p].oldNodalGroup=this.nodes[p].nodalGroup,this.nodes[p].oldClusterDistance=this.nodes[p].clusterDistance,this.nodes[p].velocity.x=Math.min(this.nodes[p].velocity.x,2*this.nodes[p].metrics.radius),this.nodes[p].velocity.y=Math.min(this.nodes[p].velocity.y,2*this.nodes[p].metrics.radius)}}])&&x(e.prototype,n),r&&x(e,r),t}();window.onload=function(){i.init(),o.a.drawInit(),(new _).startLooper()}}]);